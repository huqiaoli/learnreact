<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>组件生命周期</title>
	<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
	<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
	<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>

<body>

	<div id="root"></div>
	<script type="text/babel">
	//一般来说，一个组件类由 extends Component 创建，并且提供一个 render 方法以及其他可选的生命周期函数、组件相关的事件或方法来定义
	// class LikeButton extends React.Component{
	// 	constructor(props){
	// 		super(props);
	// 		this.state = {liked:false};
	// 	}
	// 	handleClick(e){
	// 		this.setState({liked:!this.state.liked})
	// 	}
	// 	render(){
	// 		const text=this.state.liked ? 'like' : 'haven\'t liked';
	// 		return(
	// 			<p onClick={this.handleClick.bind(this)}>
	// 				You {text} this. Click to toggle
	// 			</p>
	// 		)
	// 	}
	// }
	// ReactDOM.render(
	// 	<LikeButton />,
	// 	document.getElementById('root')
	// )

	class Hello extends React.Component {
		constructor(props) {
			super(props)
			this.state = {
				opacity:1.0
			};
		}
		componentDidMount() {
			this.timer = setInterval(function(){
				var opacity = this.state.opacity;
				opacity -= .05;
				if(opacity < 0.1) {
					opacity = 1.0;
				}
				this.setState({
					opacity:opacity
				});
			}.bind(this),100);
		}
		render() {
			return(
				<div style={{opacity:this.state.opacity}}>
					hello {this.props.name}
				</div>
			);
		}
	}
	ReactDOM.render(
		<Hello name="world" />,
		document.getElementById('root')
	)
	//上面代码在hello组件加载以后，通过 componentDidMount 方法设置一个定时器，每隔100毫秒，就重新设置组件的透明度，从而引发重新渲染
	</script>

</body>

</html>