<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>状态提升</title>
	<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
	<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
	<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>

<body>

	<div id="root"></div>
  <script type="text/babel">
  //创建一个温度计算器来计算水是否会在给定的温度下烧开
  //先创建一个名为 BoilingVerdict 的组件,它会接受 celsius 这个温度变量作为它的 props 属性，最后根据温度判断返回内容
  // function BoilingVerdict(props){
  //   if(props.celsius >= 100){
  //     return <p>水会烧开</p>
  //   }
  //     return <p>水不会烧开</p>
    
  // }
  // //Calculator 组件,它会渲染一个 <input> 来接受用户输入，然后将输入的温度值保存在 this.state.temperature 当中。它会根据输入的值渲染出 BoilingVerdict 组件
  // class Calculator extends React.Component{
  //   constructor(props){
  //     super(props);
  //     this.state = {temperature:''};
  //     this.handleChange = this.handleChange.bind(this);
  //   }
  //   handleChange(event){
  //     this.setState({temperature:event.target.value})
  //   }
  //   render(){
  //     const temperature = this.state.temperature
  //     return(
  //       <fieldset>
  //         <legend>输入一个摄氏温度</legend>
  //         <input type="text" value={temperature} onChange={this.handleChange} />
  //         <BoilingVerdict celsius={parseFloat(temperature)} />
  //       </fieldset>
  //     )
  //   }
  // }
  // ReactDOM.render(
  //   <Calculator />,
  //   document.getElementById('root')
  // )

  //添加第二个输入框
  //通过从 Calculator 组件中抽离一个 TemperatureInput 组件出来。我们也会给它添加一个值为 c 或 f 的表示温度单位的 scale 属性
  const scaleNames = {
    c:'Celsius',
    f:'Fahrenheit'
  };
  class TemperatureInput extends React.Component{
    constructor(props){
      super(props);
      this.state = {temperature:''};
      this.handleChange = this.handleChange.bind(this);
    }
    handleChange(event){
      this.setState({temperature:event.target.value})
    }
    render(){
      const temperature = this.state.temperature;
      const scale = this.props.scale;
      return(
        <fieldset>
          <legend>Enter temperature in {scaleNames[scale]}:</legend>
          <input type="text" value={temperature} onChange={this.handleChange} />
        </fieldset>
      );
    }
  }
  class Calculator extends React.Component{
    render(){
      return(
        <div>
          <TemperatureInput scale='c' />
          <TemperatureInput scale='f' />
        </div>
      )
    }
  }
  ReactDOM.render(
    <Calculator />,
    document.getElementById('root')
  )

  //将摄氏度和华氏度互相转换的函数
  function toCelsius(fahrenheit){
    return (fahrenheit - 32) * 5 / 9;
  }
  function toFahrenheit(celsius){
    return (celsius * 9 / 5) + 32;
  }
  function tryConvert(temperature,convert){
    const input = parseFloat(temperature);
    if(Number.isNaN(input)){
      return '';
    }
    const output = convert(input);
    const rounded = Math.round(output * 1000) / 1000;
    return rounded.toString();
  }
	</script>

</body>

</html>